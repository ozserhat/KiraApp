@model Framework.WebUI.Models.ViewModels.GayrimenkulDetayVM
@{
    ViewBag.Title = "Duzenle";
    Layout = "~/Areas/Emlak/Views/Shared/_LayoutEmlak.cshtml";
}
@if (!Model.HideContent)
{
    <div id="content">
        <section id="widget-grid" class="sayfaust_bosluk">
            <div class="row">
                <article class="col-sm-12 col-md-12 col-lg-12">
                    <div class="jarviswidget" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false" data-widget-deletebutton="false" data-widget-fullscreenbutton="false" data-widget-custombutton="false" data-widget-sortable="false">
                        <header>
                            <span class="widget-icon"> <i class="fa fa-list"></i> </span>
                            <h2>Gayrimenkul Tanım</h2>

                        </header>
                        <div role="content" style="display: block;">
                            <div class="jarviswidget-editbox">
                            </div>
                            <div class="widget-body">
                                <div class="row">
                                    <div id="wizard-1" novalidate="novalidate">
                                        <div id="bootstrap-wizard-1" class="col-sm-12">

                                            @Html.AntiForgeryToken()
                                            @Html.HiddenFor(x => x.Guid)
                                            @Html.HiddenFor(x => x.Id)
                                            <div id="wizard">
                                                <div class="form-bootstrapWizard">
                                                    <ul class="form-wizard nav nav-tabs">

                                                        <li data-target="#step1" class="active" id="step1" style="width:15%;">
                                                            <a href="#tab1" data-toggle="tab" aria-expanded="true">

                                                                <span class="title" style="z-index:2;">Gayrimenkul Bilgileri</span>
                                                            </a>
                                                        </li>

                                                        <li data-target="#step2" id="step2" style="width:15%;">
                                                            <a href="#tab2" data-toggle="tab" aria-expanded="false">

                                                                <span class="title" style="z-index:2;">Tapu Bilgileri</span>
                                                            </a>
                                                        </li>

                                                        <li data-target="#step3" id="step3" style="width: 15%;">
                                                            <a href="#tab3" data-toggle="tab" aria-expanded="false">

                                                                <span class="title" style="z-index:2;">Dosya Bilgileri</span>
                                                            </a>
                                                        </li>
                                                        <li data-target="#step4" id="step4" style="width: 15%;">
                                                            <a href="#tab4" data-toggle="tab" aria-expanded="false">

                                                                <span class="title" style="z-index:2;">Alt Gayrimenkuller</span>
                                                            </a>
                                                        </li>
                                                        <li data-target="#step5" id="step5" style="width: 15%;">
                                                            <a href="#tab5" data-toggle="tab" aria-expanded="false">
                                                                <span class="title" style="z-index:2;">Harita</span>
                                                            </a>
                                                        </li>

                                                    </ul>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="tab-content">
                                                    <div class="tab-pane active" id="tab1">
                                                        <legend>
                                                            <h3><strong>1. Adım </strong> - Gayrimenkul Bilgileri</h3>
                                                        </legend>
                                                        <form class="form-horizontal" id="gayrimenkulForm" novalidate="novalidate">
                                                            @Html.AntiForgeryToken()
                                                            <fieldset>
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.GayrimenkulNo, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.GayrimenkulNo, "", new { @class = "form-control", @readonly = true, @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("GayrimenkulNo", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.GayrimenkulDurum, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.GayrimenkulDurum, "", new { @class = "form-control", @readonly = true, @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("GayrimenkulDurum_Id", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.GayrimenkulTuru, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.GayrimenkulTuru, "", new { @class = "form-control", @readonly = true, @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("GayrimenkulTur_Id", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.GayrimenkulAdi, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.GayrimenkulAdi, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("GayrimenkulAdi", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.IlceAdi, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.IlceAdi, "", new { @class = "form-control", @readonly = true, @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("Ilce_Id", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.MahalleAdi, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.MahalleAdi, "", new { @class = "form-control", @readonly = true, @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("Mahalle_Id", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.Cadde, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.Cadde, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("Cadde", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.Sokak, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.Sokak, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("Sokak", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">

                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.DisKapiNo, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.DisKapiNo, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("DisKapiNo", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.IcKapiNo, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.IcKapiNo, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("IcKapiNo", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">

                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.Koordinat, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.Koordinat, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("Koordinat", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group" id="colMetrekare">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.Metrekare, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.Metrekare, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("Metrekare", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">

                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.AracKapasitesi, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.AracKapasitesi, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("AracKapasitesi", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.AcikAdres, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextAreaFor(model => model.AcikAdres, new { @class = "form-control", @rows = "3", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("AcikAdres", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </fieldset>
                                                        </form>
                                                    </div>

                                                    <div class="tab-pane" id="tab2">
                                                        <legend>
                                                            <h3><strong>2. Adım </strong> - Tapu Bilgileri</h3>
                                                        </legend>
                                                        <form class="form-horizontal" id="tapuForm" novalidate="novalidate">
                                                            @Html.AntiForgeryToken()
                                                            <fieldset>
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.BinaKimlikNo, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.BinaKimlikNo, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("BinaKimlikNo", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.NumaratajKimlikNo, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.NumaratajKimlikNo, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("NumaratajKimlikNo", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.Ada, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.Ada, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("Ada", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.Pafta, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.Pafta, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("Pafta", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.Parsel, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.Parsel, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("Parsel", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="form-group">
                                                                            <div class="input-group" style="width: 100%;">
                                                                                @Html.LabelFor(model => model.AdresNo, new { @class = "col-md-4 font-bold" })
                                                                                <div class="col-md-6">
                                                                                    @Html.TextBoxFor(model => model.AdresNo, "", new { @class = "form-control", @disabled = "disabled" })
                                                                                    @Html.ValidationMessage("AdresNo", new { @class = "text-danger" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>


                                                            </fieldset>
                                                        </form>
                                                    </div>

                                                    <div class="tab-pane" id="tab3">
                                                        <legend>
                                                            <h3><strong>3. Adım </strong> - Dosya Bilgileri</h3>
                                                        </legend>
                                                        <form class="form-horizontal" id="GayrimenkulDosyalar" novalidate="novalidate">
                                                            @Html.AntiForgeryToken()
                                                            <fieldset class="dosyaSatirlari" id="dosyaSatiri_1">
                                                                <form class="form-horizontal" id="GayrimenkulDosyalar" novalidate="novalidate">
                                                                    @Html.AntiForgeryToken()
                                                                    <fieldset class="dosyaSatirlari" id="dosyaSatiri">
                                                                        <table id="dtGayrimenkulDosya" class="table table-striped table-bordered table-hover dataTable no-footer" role="grid" aria-describedby="dt_basic_info">
                                                                            <thead>
                                                                                <tr role="row">
                                                                                    <th style="width: 20px;">No</th>
                                                                                    <th class="sorting_disabled" rowspan="1" colspan="1">Dosya Türü</th>
                                                                                    <th class="sorting_disabled" rowspan="1" colspan="1">Dosya Adı</th>
                                                                                    <th class="sorting_disabled text-center" rowspan="1" colspan="1" style="text-align: right;  padding-right: 30px; width: 100px;">İşlem</th>
                                                                                </tr>
                                                                            </thead>
                                                                            @if (Model != null && Model.GayrimenkulDosyalar != null && Model.GayrimenkulDosyalar.Count > 0)
                                                                            {
                                                                                <tbody>

                                                                                    @{int i = ((Model.GayrimenkulDosyalar.Count - 1) * 1) + 1;}

                                                                                    @foreach (var item in Model.GayrimenkulDosyalar)
                                                                                    {
                                                                                        <tr role="row" class="odd">
                                                                                            <td>@(i++)</td>
                                                                                            <td>@Html.DisplayFor(model => item.GayrimenkulDosyaTur)</td>
                                                                                            <td>@Html.DisplayFor(model => item.DosyaAdi)</td>

                                                                                            <td class="text-center">
                                                                                                <a href="javascript:void(0)" id="dosyaIndir" title="" rel="tooltip" data-placement="left"
                                                                                                   class="no-underline margin-right-5 dosyaIndir" data-url="@Url.Action("PdfGoruntule","Gayrimenkul",
                                                                                                           new { DosyaAdi = item.DosyaAdi, DosyaTipi = item.GayrimenkulDosyaTur })"
                                                                                                   data-original-title="Dosya Görüntüle ve İndir"
                                                                                                   data-toggle="modal" data-target="#DosyaGosterModal">
                                                                                                    <i class="fa fa-eye font-md txt-color-blue"></i>
                                                                                                </a>
                                                                                            </td>
                                                                                        </tr>
                                                                                    }
                                                                                </tbody>
                                                                            }
                                                                            else
                                                                            {
                                                                                <tbody>
                                                                                </tbody>
                                                                            }
                                                                        </table>
                                                                    </fieldset>
                                                                </form>
                                                            </fieldset>
                                                        </form>
                                                    </div>

                                                    <div class="tab-pane" id="tab4">
                                                        <legend>
                                                            <h3><strong>4. Adım </strong> -Alt Gayrimenkuller</h3>
                                                        </legend>
                                                        <form class="form-horizontal" id="altGayrimenkulForm" novalidate="novalidate">
                                                            <fieldset>
                                                                <div class="col-md-12">
                                                                    <div class="col-md-12">
                                                                        <table id="dtAltGayrimenkul" class="table table-striped table-bordered table-hover dataTable no-footer" role="grid" aria-describedby="dt_basic_info">
                                                                            <thead>
                                                                                <tr role="row">
                                                                                    <th>Detay</th>
                                                                                    <th class="sorting_disabled" rowspan="1" colspan="1">Tür Adı</th>
                                                                                    <th class="sorting_disabled" rowspan="1" colspan="1">Gayrimenkul No</th>
                                                                                    <th class="sorting_disabled" rowspan="1" colspan="1">Adı</th>
                                                                                    <th class="sorting_disabled" rowspan="1" colspan="1">İl</th>
                                                                                    <th class="sorting_disabled" rowspan="1" colspan="1">İlçe</th>
                                                                                    <th class="sorting_disabled" rowspan="1" colspan="1" style="width: 250px;">Durum</th>
                                                                                    <th class="sorting_disabled" rowspan="1" colspan="1" style="width: 250px;">Alt Kiracı Ekle</th>
                                                                                    <th class="sorting_disabled" rowspan="1" colspan="1" style="width: 250px;">Sil</th>

                                                                                </tr>
                                                                            </thead>
                                                                            @if (Model.AltGayrimenkuller != null && Model.AltGayrimenkuller.Count() > 0)
                                                                            {
                                                                                <tbody>


                                                                                    @foreach (var item in Model.AltGayrimenkuller)
                                                                                    {
                                                                                        <tr role="row" class="odd">
                                                                                            <td id="btnGetirDetay" data-id="@item.Id" class="details-control">
                                                                                            <td>@Html.DisplayFor(model => item.GayrimenkulTur.Ad)</td>
                                                                                            <td>@Html.DisplayFor(model => item.GayrimenkulNo)</td>
                                                                                            <td>@Html.DisplayFor(model => item.Ad)</td>
                                                                                            <td>@Html.DisplayFor(model => item.Ilceler.Iller.Ad)</td>
                                                                                            <td>@Html.DisplayFor(model => item.Ilceler.Ad)</td>
                                                                                            <td>
                                                                                                @if (item.AktifMi.HasValue && item.AktifMi.Value)
                                                                                                {
                                                                                                    <b class="label aktif-buton">Aktif</b>
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    <b class="label pasif-buton">Pasif</b>
                                                                                                }
                                                                                            </td>
                                                                                            <td>
                                                                                                <a id="btnAltKiraci" href="#" style="text-decoration: none;" class="no-underline margin-right-5 txt-color-teal altRow"
                                                                                                   data-original-title="Alt Kiracı Ekle" data-toggle="modal" data-target="#altKiraciModal"
                                                                                                   data-id="@item.Id" data-name="@item.Ad">
                                                                                                    <i id="blueCaret" class="fa fa-user-o rotate"></i>
                                                                                                    Alt Kiracı Ekle
                                                                                                </a>
                                                                                            </td>
                                                                                            <td>
                                                                                                <a id="btnAltGayrimenkulSil" href="#" style="text-decoration: none;" 
                                                                                                   class="no-underline margin-right-5 fa fa-remove font-md txt-color-blue delete-altGayrimenkul"
                                                                                                   data-id="@item.Id" data-name="@item.Ad">
                                                                                                </a>
                                                                                            </td>
                                                                                        </tr>
                                                                                    }
                                                                                </tbody>
                                                                            }
                                                                            else
                                                                            {
                                                                                <tbody>
                                                                                </tbody>
                                                                            }
                                                                        </table>

                                                                        <div id="dvAltKiraci" style="display:none;">
                                                                            <table id="tblAltKiraci" class="table table-striped table-bordered table-hover dataTable no-footer display nowrap">
                                                                                <thead>
                                                                                    <tr role="row">
                                                                                        <th>@Html.DisplayName("Kişi Türü")</th>
                                                                                        <th>@Html.DisplayName("T.C. Kimlik No")</th>
                                                                                        <th>@Html.DisplayName("Vergi No")</th>
                                                                                        <th>@Html.DisplayName("Ad Soyad")</th>
                                                                                        <th>@Html.DisplayName("Tanım")</th>
                                                                                        <th>@Html.DisplayName("İlçe")</th>
                                                                                        <th>@Html.DisplayName("Mahalle")</th>
                                                                                        <th>@Html.DisplayName("Açık Adres")</th>
                                                                                        <th>@Html.DisplayName("Aktif Mi")</th>
                                                                                        <th>@Html.DisplayName("İşlem")</th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody></tbody>
                                                                            </table>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </fieldset>
                                                        </form>
                                                    </div>

                                                    <div class="tab-pane" id="tab5">
                                                        <legend>
                                                            <h3><strong>5. Adım </strong> -Harita</h3>
                                                        </legend>
                                                        <form class="form-horizontal" id="HaritaForm" novalidate="novalidate">
                                                            <fieldset>
                                                                <div class="col-md-10 col-md-offset-1">
                                                                    <div class="col-md-12 smart-form">
                                                                        <div id="osm-map" class="map2" style="width:auto;height:400px"></div>
                                                                        <input type="hidden" id="hdKoordinat" value="@Model.Koordinat" />
                                                                    </div>
                                                                </div>
                                                            </fieldset>
                                                        </form>
                                                    </div>
                                                </div>
                                                <div class="form-actions sonStep" style="margin-right: -18px;">
                                                    <div class="row">
                                                        <div class="col-sm-12">
                                                            <ul class="pager wizard no-margin no-steps-container">
                                                                <li class="previous disabled">
                                                                    <a href="javascript:void(0);" class="btn btn-lg btn-default" id="btnGeri"> Geri </a>
                                                                </li>
                                                                <li class="next">
                                                                    <a href="javascript:void(0);" id="btnIleri" class="btn btn-lg txt-color-darken"> İlerle</a>
                                                                    <div id="loadingbtnIleri" class="hide" style="float:right;"><i class="fa fa-spinner fa-spin fa-2x"></i> İşleminiz yapılıyor ...</div>
                                                                </li>
                                                                <li class="finish" style="float: right; margin-right: 15px; display: block;">
                                                                    <div id="dvSonKaydet" class="hide" style="float:right;"><i class="fa fa-spinner fa-spin fa-2x"></i> İşleminiz yapılıyor ...</div>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @*<div role="contentinfo">
                                    <div class="widget-body">
                                        <div class="tab-pane fade active in">
                                            <div class="form-group">
                                                <div class="col-md-12">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>*@
                        </div>
                    </div>
                </article>
            </div>
        </section>
    </div>

    <div class="modal fade" id="DosyaGosterModal" tabindex="-1" role="dialog" aria-labelledby="DosyaGosterModalLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel">Dosya Görüntüleme</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <div class="block-head">
                                    <div class="item-content">
                                        <iframe id="iframe1" style="border: 1px solid black; height: 500px; width: 100%">
                                        </iframe>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="#" id="btnDosyaGosterVazgec" type="button" data-dismiss="modal" class="btn btn-warning">
                        <span class="glyphicon glyphicon-chevron-left"></span> Kapat
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="altKiraciModal" tabindex="-1" role="dialog" aria-labelledby="altKiraciLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel">Alt Kiracı Bilgisi</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <div class="block-head">
                                    <div class="item-content">
                                        <form id="frmAltKiraci">
                                            <fieldset>
                                                <input type="hidden" id="gyId" />
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <div class="form-group">
                                                            <div class="input-group" style="width: 100%;">
                                                                @Html.LabelFor(model => model.KisiTuruSelectList, new { @class = "control-label col-md-4 zorunluYildiz" })
                                                                <div class="col-md-8">
                                                                    @Html.DropDownList("KisiTuru_Id", Model.KisiTuruSelectList, "Seçiniz", new { @class = "select2 required" })
                                                                    @Html.ValidationMessage("KisiTuru_Id", "Lütfen seçiniz!", new { @class = "text-danger" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <div class="form-group">
                                                            <div class="input-group" style="width: 100%;">
                                                                @Html.LabelFor(model => model.IlceSelectList, new { @class = "control-label col-md-4 zorunluYildiz" })
                                                                <div class="col-md-8">
                                                                    @Html.DropDownList("Ilce_Id", Model.IlceSelectList, "Seçiniz", new { @class = "select2 required" })
                                                                    @Html.ValidationMessage("Ilce_Id", "Lütfen seçiniz!", new { @class = "text-danger" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <div class="form-group">
                                                            <div class="input-group" style="width: 100%;">
                                                                @Html.LabelFor(model => model.MahalleSelectList, new { @class = "control-label col-md-4 zorunluYildiz" })
                                                                <div class="col-md-8">
                                                                    @Html.DropDownList("Mahalle_Id", new SelectList(string.Empty, "Value", "Text"), "Seçiniz", new { @class = "select2" })
                                                                    @Html.ValidationMessage("Mahalle_Id", "Lütfen seçiniz!", new { @class = "text-danger" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="tcDiv" style="display:none;">
                                                    <div class="col-md-8">
                                                        <div class="form-group">
                                                            <div class="input-group" style="width: 100%;">
                                                                @Html.Label("Tc Kimlik No", new { @class = "control-label col-md-4 zorunluYildiz" })
                                                                <div class="col-md-8">
                                                                    @Html.TextBox("TcKimlikNo", "", new { @class = "form-control col-md-4", @type = "number" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="vergiDiv" style="display:none;">
                                                    <div class="col-md-8">
                                                        <div class="form-group">
                                                            <div class="input-group" style="width: 100%;">
                                                                @Html.Label("Vergi No", new { @class = "control-label col-md-4 zorunluYildiz" })
                                                                <div class="col-md-8">
                                                                    @Html.TextBox("VergiNo", "", new { @class = "form-control col-md-4", @type = "number" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <div class="form-group">
                                                            <div class="input-group" style="width: 100%;">
                                                                @Html.Label("Ad", new { @class = "control-label col-md-4 zorunluYildiz" })
                                                                <div class="col-md-8">
                                                                    @Html.TextBox("Ad", "", new { @class = "form-control col-md-4 required" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <div class="form-group">
                                                            <div class="input-group" style="width: 100%;">
                                                                @Html.Label("Soyad", new { @class = "control-label col-md-4 zorunluYildiz" })
                                                                <div class="col-md-8">
                                                                    @Html.TextBox("Soyad", "", new { @class = "form-control col-md-4 required" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <div class="form-group">
                                                            <div class="input-group" style="width: 100%;">
                                                                @Html.Label("Tanim", new { @class = "control-label col-md-4 zorunluYildiz" })
                                                                <div class="col-md-8">
                                                                    @Html.TextBox("Tanim", "", new { @class = "form-control col-md-4 required" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <div class="form-group">
                                                            <div class="input-group" style="width: 100%;">
                                                                @Html.Label("Vergi Dairesi", new { @class = "control-label col-md-4 zorunluYildiz" })
                                                                <div class="col-md-8">
                                                                    @Html.TextBox("VergiDairesi", "", new { @class = "form-control col-md-4 required" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <div class="form-group">
                                                            <div class="input-group" style="width: 100%;">
                                                                @Html.Label("Açık Adres", new { @class = "control-label col-md-4 zorunluYildiz" })
                                                                <div class="col-md-8">
                                                                    @Html.TextArea("AltKiraciAcikAdres", new { @class = "form-control col-md-4 required", rows = "3", placeholder = "Açıklama Giriniz" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">

                    <a href="#" id="btnKiraciFormKapat" type="button" data-dismiss="modal" class="btn btn-warning">
                        <span class="glyphicon glyphicon-chevron-left"></span> Kapat
                    </a>
                    <input type="button" value="Kaydet" id="btnAltKiraciEkle" class="btn btn-primary" />

                </div>
            </div>
        </div>
    </div>
}

@section pagespecific {
    @Scripts.Render("~/bundles/jqueryval")

    <!-- Sweet Alert -->
    <link href="~/Content/SweetAlert/sweetalert2.css" rel="stylesheet" />
    <script src="~/Content/SweetAlert/sweetalert2.min.js"></script>
    <script src="~/Scripts/plugin/bootstrap-wizard/jquery.bootstrap.wizard.min.js"></script>
    <script src="~/Scripts/loadingoverlay.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
    <link href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" rel="stylesheet" />
    <script src="~/Scripts/plugin/bootstrap-wizard/jquery.bootstrap.wizard.min.js"></script>

    <style type="text/css">

        .map2 {
            height: 400px;
            top: 0;
            bottom: 0;
            width: 100%;
        }

        td.details-control {
            background: url('https://www.datatables.net/examples/resources/details_open.png') no-repeat center center;
            cursor: pointer;
        }

        tr.shown td.details-control {
            background: url('https://www.datatables.net/examples/resources/details_close.png') no-repeat center center;
        }

        .loadingoverlay_element {
            position: fixed;
            z-index: 999;
            height: 10em;
            width: 20em;
            overflow: visible;
            margin: auto;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
        }

        .pasif-buton-beyandetay {
            padding: 3px 6px;
            border: solid 2px;
            background: none;
            border-color: #e08d26;
            color: #e08d26;
            font-weight: 700;
            display: block;
            text-align: center;
            font-size: 12px;
            width: 75px;
        }

        .aktif-buton-beyandetay {
            padding: 3px 6px;
            border: solid 2px;
            background: none;
            border-color: #2ecc71;
            color: #2ecc71;
            font-weight: 700;
            display: block;
            text-align: center;
            font-size: 12px;
            width: 55px;
        }
    </style>

    <script type="text/javascript">
        var element = document.getElementById('osm-map');

        var map = L.map(element);

        var tile_layer = L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        var lat = $('#hdKoordinat').val().split(',')[0];
        var long = $('#hdKoordinat').val().split(',')[1];
        if (lat != "" && long != "") {

            var target = L.latLng([lat, long], 14);

            // Set map's center to target with zoom 14.
            map.setView(target, 14);

            // Place a marker on the same location.
            L.marker(target).addTo(map);
        }


    </script>

    <!--Gayrimenkul Tablo Ayarlar-->
    <script type="text/javascript">
        var dt_settings = {
            "language": {
                "url": "//cdn.datatables.net/plug-ins/1.10.20/i18n/Turkish.json"
            },
            "searching": true
        };
        $(document).ready(function () {
            $('#dtGayrimenkulDosya').DataTable(dt_settings);
            $('#dtAltGayrimenkul').DataTable(dt_settings);
            $('#tblAltKiraci').DataTable(dt_settings);
        });
    </script>

    <!--Belge Görüntüleme-->
    <script type="text/javascript">
        $(".dosyaIndir").on("click", function () {
            var url = $(this).attr("data-url");
            $("#iframe1").attr("src", url);
        });
    </script>

    <!--Harita Görüntüleme -->
    <script type="text/javascript">
        //function initMap() {
        //    var koordinat = $('#hdKoordinat').val();

        //    if (koordinat != null) {
        //        koordinat = koordinat.replace("(", "").replace(")", "");
        //        var geo = { lat: koordinat.split(',')[0], lng: koordinat.split(',')[1] };

        //        var map = new google.maps.Map(
        //            document.getElementById('dvMaps'), { zoom: 16, center: geo });
        //        var marker = new google.maps.Marker({ position: geo, map: map });
        //    }
        //}
    </script>

    <!--Tab Control-->
    <script type="text/javascript">

        $(document).ready(function () {
            const wizard = $('#wizard');

            wizard.bootstrapWizard({
                'tabClass': 'nav nav-pills',

                onTabClick: function (tab, navigation, index) {
                    return true;
                },
                onNext: function (tab, navigation, index) {

                    if (index == 1) {
                        return true;
                    }
                    else if (index == 2) {
                        return true;
                    }
                    else if (index == 3) {
                        return true;
                    }
                    else if (index == 4) {
                        return false;
                    }

                },
                onTabShow: function (tab, navigation, index) {

                    const $total = navigation.find('li').length;
                    const $current = index + 1;
                    map.invalidateSize();
                    const pager = wizard.find('.pager');

                    if ($current >= $total) {
                        pager.find('.next').hide();
                        pager.find('.finish').show();
                        pager.find('.finish').removeClass('disabled');

                    } else {
                        pager.find('.next').show();
                        pager.find('.finish').hide();
                    }
                }
            });
        });
    </script>

    <!--İlçe Bilgileri-->
    <script type="text/javascript">
        $(document).ready(function () {

            $("#Ilce_Id").change(function (e) {

                var ilceId = $(this).val();

                if (ilceId != null && ilceId != '') {
                    $.ajax({
                        type: 'Post',
                        url: '/Emlak/Gayrimenkul/MahalleSelectList/ilceId=' + ilceId,
                        data: { ilceId: ilceId },
                        success: function (result) {
                            if (result != null && result.success) {
                                $("#Mahalle_Id").empty();
                                $("#Mahalle_Id").append(
                                    $('<option></option>').val(null).html('Lütfen Seçiniz'));
                                $.each(result.Data, function (i, data) {
                                    $('<option></option>').val(null).html('');
                                    $("#Mahalle_Id").append(
                                        $('<option></option>').val(data.Id).html(data.Ad));
                                });
                            }
                            else {
                                swal('Uyarı!', result.Message, 'warning');
                            }
                        },
                        error: function (xhr) {
                            swal('Uyarı!', result.Message, 'warning');
                        }
                    });
                }
            });
        });
    </script>

    <!--Kişi Türü Bilgileri-->
    <script type="text/javascript">
        $(document).ready(function () {

            $("#KisiTuru_Id").change(function (e) {

                var kisiTuruId = $(this).val();

                if (kisiTuruId != null && kisiTuruId != '') {
                    var divVergi = $('#vergiDiv');
                    var divTc = $('#tcDiv');

                    if (kisiTuruId == 1) {
                        divVergi.show();
                        divTc.hide();

                    }
                    else {
                        divVergi.hide();
                        divTc.show();
                    }

                }
            });
        });
    </script>

    <!--Ek Tahakkuk Hesaplama -->
    <script type="text/javascript">

        $('.altRow').click(function (val) {
            var gayrimenkulId = $(this).attr("data-id");
            var gayrimenkulAd = $(this).attr("data-name");
            $('#gyId').val(gayrimenkulId);
        });


        $('#btnAltKiraciEkle').click(function (val) {
            var model = {
                KiraciTur_Id: $('#KisiTuru_Id').val(),
                Gayrimenkul_Id: $('#gyId').val(),
                Ilce_Id: $('#Ilce_Id').val(),
                Mahalle_Id: $('#Mahalle_Id').val(),
                TcKimlikNo: $('#TcKimlikNo').val(),
                VergiNo: $('#VergiNo').val(),
                Ad: $('#Ad').val(),
                Soyad: $('#Soyad').val(),
                Tanim: $('#Tanim').val(),
                VergiDairesi: $('#VergiDairesi').val(),
                AcikAdres: $('#AltKiraciAcikAdres').val(),
            };

            if ($("#frmAltKiraci").valid()) {
                $.ajax({
                    type: 'Post',
                    url: '/Emlak/Gayrimenkul/AltKiraciEkle',
                    data: { altKiraciModel: model },
                    beforeSend: function () {
                        $.LoadingOverlay("show", { text: "Alt Kiracı Ekleme İşlemi Gerçekleştiriliyor...", textResizeFactor: 0.2, background: "rgba(0, 0, 0, 0.5)" });
                    },
                    success: function (result) {
                        if (result != null && result.success) {
                            swal('Bilgi!', result.Message, 'success');
                            $.LoadingOverlay("hide");
                            setTimeout(function () {
                                window.location.href = "/Emlak/Gayrimenkul/Detay" + window.location.search;
                            }, 2000);
                        }
                        else {
                            swal('Uyarı!', result.Message, 'warning');
                            $.LoadingOverlay("hide");
                        }
                    },
                    error: function (xhr) {
                        swal('Uyarı!', result.Message, 'warning');
                        $.LoadingOverlay("hide");
                    }
                });
            }
        });

    </script>

    <!--Alt Kiracı Bilgisi -->
    <script type="text/javascript">
        $('#dtAltGayrimenkul td:first-child').click(function (e) {

            var id = $(this).attr("data-id");

            var table = $('#dtAltGayrimenkul').DataTable();

            var tr = $(this).closest('tr');

            var row = table.row(tr);


            $.ajax({
                url: "/Emlak/Gayrimenkul/GetirDetayTable/",
                type: "Post",
                dataType: 'Json',
                data: { GayrimenkulId: id },
                success: function (success) {
                    if (success.result != null && success.result.length > 0) {

                        if (row.child.isShown()) {
                            row.child.hide();
                            tr.removeClass('shown');
                        } else {
                            row.child.isShown();
                            var result = row.child(subTable(id, success.result)).show();

                            if (result != null) {
                                result.show();
                                tr.addClass('shown');
                            }
                        }
                    }
                },
            });
        });

        function subTable(GayrimenkulId, dataSource) {

            var html = '<table id="tblAltKiraci" class="table table-striped table-bordered table-hover dataTable no-footer display nowrap">'

                + '<thead><tr>' +
                '<th>No</th>' +
                '<th>Kişi Türü</th>' +
                '<th>T.C. Kimlik No</th>' +
                '<th>Vergi No</th>' +
                '<th>Ad Soyad</th>' +
                '<th>Tanım</th>' +
                '<th>İlçe</th>' +
                '<th>Mahalle</th>' +
                '<th>Açık Adres</th>' +
                '<th>Aktif Mi</th>' +
                '<th class="sorting_disabled text - center" rowspan="1" colspan="1" style="text - align: right; padding - right: 30px; width: 100px; ">İşlemler</th></tr >' +
                '</thead > ';

            var tc = '';
            var vergi = '';
            var aktifMiStr = '';



            if (dataSource != null) {
                for (var i = 0; i < dataSource.length; i++) {

                    if (GayrimenkulId == dataSource[i].Gayrimenkul_Id) {

                        if (dataSource[i].TcKimlikNo == null)
                            tc = '-';
                        else
                            tc = dataSource[i].TcKimlikNo;

                        if (dataSource[i].VergiNo == null)
                            vergi = '-';
                        else
                            vergi = dataSource[i].VergiNo;

                        if (dataSource[i].AktifMi) {
                            aktifMiStr = '<b class="label aktif-buton-beyandetay">Aktif </b>';
                        }
                        else {
                            aktifMiStr = '<b class="label pasif-buton-beyandetay">Pasif</b>';
                        }
                        html += '<tr role="row">' +
                            '<td role="row" class="odd">' + (i + 1) + '</td>' +
                            '<td>' + dataSource[i].KiraciTurleri.Ad + '</td>' +
                            '<td>' + tc + '</td>' +
                            '<td>' + vergi + '</td>' +
                            '<td>' + dataSource[i].Ad + ' ' + dataSource[i].Soyad + '</td>' +
                            '<td>' + dataSource[i].Tanim + '</td>' +
                            '<td>' + dataSource[i].IlceAdi + '</td>' +
                            '<td>' + dataSource[i].MahalleAdi + '</td>' +
                            '<td>' + dataSource[i].AcikAdres + '</td>' +
                            '<td>' + aktifMiStr + '</td>' +
                            '<td><a onclick="deletealert(' + dataSource[i].Id + ')"  class="no-underline margin-right-5 fa fa-remove font-md txt-color-blue altKiraci" data-id="' + dataSource[i].Id + '" data-name="' + dataSource[i].Ad + ' ' + dataSource[i].Soyad + '" href="#"></a></td>' +
                            '</tr>';
                    }
                }
            }
            html += '</table>';
            return html;
        }
    </script>

    <!--Alt Kiracı Silme İşlemi -->
    <script type="text/javascript">
        $('.delete-altGayrimenkul').click(function (e) {
            var id = $(this).attr("data-id");
            var name = $(this).attr("data-name");
            var closestTR = $(this).closest("tr");
            var vl = SilAltGayrimenkul(id, name, closestTR);

        });

        function SilAltGayrimenkul(id, name, closestTR) {

            var name = $(this).attr("data-name");
            var closestTR = $(this).closest("tr");
            swal({
                title: "Uyarı",
                text: "Alt Gayrimenkul Silmek İstediğinizden Emin misiniz? Alt Kiracı Bilgileride Silinecektir",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "Evet",
                cancelButtonText: "İptal"
            }).then(function (isConfirm) {
                if (isConfirm) {
                    $.ajax({
                        url: "/Emlak/Gayrimenkul/SilAltGayrimenkul/" + id,
                        type: 'POST',
                        success: function (result) {
                            if (result.success) {
                                swal('Bilgi!', name + ' ' + result.Message, 'success');
                                window.location.reload();
                            }
                            else swal('Uyarı!', name + ' ' + result.Message, 'error');
                        }
                    });
                }
            })
        }
    </script>

    <!--Alt Kiracı Silme İşlemi -->
    <script type="text/javascript">
        $('.altKiraci').click(function (e) {
            var id = $(this).attr("data-id");
            var name = $(this).attr("data-name");
            var closestTR = $(this).closest("tr");
            var vl = deletealert(id, name, closestTR);

        });

        function deletealert(id) {

            var name = $(this).attr("data-name");
            var closestTR = $(this).closest("tr");
            swal({
                title: "Uyarı",
                text: "Alt Kiracıyı Silmek İstediğinizden Emin misiniz?",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "Evet",
                cancelButtonText: "İptal"
            }).then(function (isConfirm) {
                if (isConfirm) {
                    $.ajax({
                        url: "/Emlak/Gayrimenkul/SilAltKiraci/" + id,
                        type: 'POST',
                        success: function (result) {
                            if (result.success) {
                                swal('Bilgi!', name + ' ' + result.Message, 'success');
                                window.location.reload();
                            }
                            else swal('Uyarı!', name + ' ' + result.Message, 'error');
                        }
                    });
                }
            })
        }
    </script>
}